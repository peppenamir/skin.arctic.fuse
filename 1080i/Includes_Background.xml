<?xml version="1.0" encoding="UTF-8"?>
<includes>

    <include name="Background_BusyLoader">
        <control type="group">
            <visible>Window.IsVisible(DialogBusy.xml)</visible>
            <animation effect="fade" start="0" end="100" time="5000" tween="cubic" easing="inout" reversible="true">Visible</animation>
            <animation effect="fade" start="100" end="0" time="1000" tween="cubic" easing="inout" reversible="true">Hidden</animation>
            <control type="multiimage">
                <timeperimage>50</timeperimage>
                <aspectratio align="center" aligny="center">stretch</aspectratio>
                <fadetime>10</fadetime>
                <colordiffuse>55ffffff</colordiffuse>
                <imagepath>resource://resource.images.arctic.waves/</imagepath>
                <randomize>false</randomize>
            </control>
        </control>
    </include>

    <include name="Background_FlixArt">
        <param name="flixart_size_w">flixart_size_w</param>
        <param name="flixart_size_h">flixart_size_h</param>
        <param name="right">0</param>
        <param name="diffuse">diffuse/flixart.png</param>
        <param name="aspectratio">scale</param>
        <param name="fadetime">background_fadetime</param>
        <definition>
            <control type="image">
                <fadetime>$PARAM[fadetime]</fadetime>
                <right>$PARAM[right]</right>
                <top>0</top>
                <height>$PARAM[flixart_size_h]</height>
                <width>$PARAM[flixart_size_w]</width>
                <aspectratio scalediffuse="false" align="$PARAM[align]" aligny="$PARAM[aligny]">$PARAM[aspectratio]</aspectratio>
                <texture background="true" diffuse="$PARAM[diffuse]">$VAR[Image_Foreground]</texture>
                <animation effect="fade" start="100" end="0" reversible="false" time="400" condition="[$EXP[Exp_FilterWall_IsMedia] | $EXP[Exp_FilterWall_IsDiscover]]">Conditional</animation>
                <animation effect="fade" start="0" end="100" reversible="false" delay="400" time="800" condition="![$EXP[Exp_FilterWall_IsMedia] | $EXP[Exp_FilterWall_IsDiscover]]">Conditional</animation>
                <include>Background_NotVideo</include>
            </control>
        </definition>
    </include>

    <include name="Background_Fanart">
        <param name="fadetime">background_fadetime</param>
        <definition>
            <control type="image">
                <fadetime>$PARAM[fadetime]</fadetime>
                <aspectratio scalediffuse="false">scale</aspectratio>
                <texture background="true">$VAR[Image_Foreground_Cheater_Parent]</texture>
                <include>Background_NotVideo</include>
            </control>
        </definition>
    </include>

    <include name="Background_Artwork">
        <param name="fadetime">background_fadetime</param>
        <definition>
            <include content="Background_FlixArt" condition="!Skin.String(Background.ArtworkStyle,Fanart)">
                <param name="fadetime">$PARAM[fadetime]</param>
            </include>
            <include content="Background_Fanart" condition="Skin.String(Background.ArtworkStyle,Fanart)">
                <param name="fadetime">$PARAM[fadetime]</param>
            </include>
        </definition>
    </include>

    <include name="Background_Blur_Quadrants">
        <control type="group">
            <!-- Left -->
            <control type="group">
                <right>$PARAM[flixart_size_w]</right>
                <width>150%</width>
                <!-- Top  -->
                <control type="image">
                    <fadetime>$PARAM[fadetime]</fadetime>
                    <height>$PARAM[flixart_size_h]</height>
                    <texture background="true" flipx="true" flipy="false">$VAR[Image_Background_Blur]</texture>
                </control>
                <!-- Bottom -->
                <control type="image">
                    <fadetime>$PARAM[fadetime]</fadetime>
                    <height>$PARAM[flixart_size_h]</height>
                    <top>$PARAM[flixart_size_h]</top>
                    <texture background="true" flipx="true" flipy="true">$VAR[Image_Background_Blur]</texture>
                </control>
            </control>

            <!-- Right -->
            <control type="group">
                <right>0</right>
                <width>$PARAM[flixart_size_w]</width>
                <!-- Top  -->
                <control type="image">
                    <fadetime>$PARAM[fadetime]</fadetime>
                    <height>$PARAM[flixart_size_h]</height>
                    <texture background="true" flipx="false" flipy="false">$VAR[Image_Background_Blur]</texture>
                </control>
                <!-- Bottom -->
                <control type="image">
                    <fadetime>$PARAM[fadetime]</fadetime>
                    <height>$PARAM[flixart_size_h]</height>
                    <top>$PARAM[flixart_size_h]</top>
                    <texture background="true" flipx="false" flipy="true">$VAR[Image_Background_Blur]</texture>
                </control>
            </control>

        </control>
    </include>

    <include name="Background_Blur_Cheater">
        <control type="group">
            <centertop>50%</centertop>
            <height>108000</height>
            <control type="image">
                <fadetime>$PARAM[fadetime]</fadetime>
                <width>192000</width>
                <height>108000</height>
                <centertop>64%</centertop>
                <texture background="true">$VAR[Image_Background_Cheater_Parent]</texture>
            </control>
        </control>
    </include>

    <include name="Background_Blur">
        <param name="flixart_size_w">flixart_size_w</param>
        <param name="flixart_size_h">flixart_size_h</param>
        <param name="fadetime">background_fadetime</param>
        <definition>
            <control type="group">
                <include>Background_NotVideo</include>
                <include content="Background_Blur_Quadrants" condition="Skin.HasSetting(TMDbHelper.EnableBlur) + !Skin.String(Background.ArtworkStyle,Fanart)">
                    <param name="flixart_size_w">$PARAM[flixart_size_w]</param>
                    <param name="flixart_size_h">$PARAM[flixart_size_h]</param>
                    <param name="fadetime">$PARAM[fadetime]</param>
                </include>
                <include content="Background_Blur_Cheater" condition="!Skin.HasSetting(TMDbHelper.EnableBlur) + !Skin.String(Background.ArtworkStyle,Fanart)">
                    <param name="fadetime">$PARAM[fadetime]</param>
                </include>
                <include content="Background_Image" condition="Skin.String(Background.ArtworkStyle,Fanart)">
                    <param name="fadetime">$PARAM[fadetime]</param>
                </include>
            </control>
        </definition>
    </include>

    <include name="Background_StartUp">
        <param name="colordiffuse">main_back</param>
        <definition>
            <control type="image">
                <texture colordiffuse="$VAR[ColorBackground]">common/white.png</texture>
            </control>
            <control type="multiimage">
                <imagepath colordiffuse="$PARAM[colordiffuse]">$VAR[Image_StartUp]</imagepath>
                <randomize>true</randomize>
                <timeperimage>5000</timeperimage>
                <fadetime>2000</fadetime>
                <aspectratio>scale</aspectratio>
                <nested />
            </control>
        </definition>
    </include>

    <include name="Background_Image">
        <param name="texture">$VAR[Image_SimpleBackground]</param>
        <definition>
            <control type="image">
                <aspectratio align="left">scale</aspectratio>
                <texture background="true">$PARAM[texture]</texture>
                <include>Background_NotVideo</include>
            </control>
        </definition>
    </include>

    <include name="Background_PVR_Overlay">
        <control type="image">
            <fadetime>background_fadetime</fadetime>
            <texture colordiffuse="$VAR[ColorBackground]">$VAR[Image_Background_Overlay]</texture>
        </control>
    </include>

    <include name="Background_NotVideo">
        <param name="fade_end">0</param>
        <definition>
            <visible>$EXP[Exp_Video_IsNotPlaying]</visible>
            <animation effect="fade" start="100" end="0" time="400" tween="sine" easing="in" reversible="false">Hidden</animation>
            <animation effect="fade" start="0" end="100" time="400" tween="sine" easing="in" reversible="false">Visible</animation>
        </definition>
    </include>

    <include name="Background_VideoStandard">
        <control type="videowindow">
            <nested />
        </control>
    </include>

    <include name="Background_VideoDimension">
        <control type="group">
            <visible>String.IsEqual(VideoPlayer.VideoAspect,$PARAM[videoaspect])</visible>
            <width>$PARAM[width]</width>
            <centerleft>50%</centerleft>
            <control type="videowindow">
            </control>
        </control>
    </include>

    <include name="Background_VideoDimensions">
        <control type="group">
            <nested />
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.33</param>
                <param name="width">133%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.37</param>
                <param name="width">137%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.43</param>
                <param name="width">143%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.44</param>
                <param name="width">144%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.50</param>
                <param name="width">150%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.56</param>
                <param name="width">156%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.57</param>
                <param name="width">157%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.66</param>
                <param name="width">166%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.67</param>
                <param name="width">167%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.75</param>
                <param name="width">175%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.77</param>
                <param name="width">177%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.78</param>
                <param name="width">178%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.81</param>
                <param name="width">181%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">1.85</param>
                <param name="width">185%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.00</param>
                <param name="width">200%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.20</param>
                <param name="width">220%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.21</param>
                <param name="width">221%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.33</param>
                <param name="width">233%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.35</param>
                <param name="width">235%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.37</param>
                <param name="width">237%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.39</param>
                <param name="width">239%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.40</param>
                <param name="width">240%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.55</param>
                <param name="width">255%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.56</param>
                <param name="width">256%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.59</param>
                <param name="width">259%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.66</param>
                <param name="width">266%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.67</param>
                <param name="width">267%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">2.76</param>
                <param name="width">276%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">3.00</param>
                <param name="width">300%</param>
            </include>
            <include content="Background_VideoDimension">
                <param name="videoaspect">4.00</param>
                <param name="width">400%</param>
            </include>
        </control>
    </include>

    <include name="Background_Video">
        <control type="group">
            <description>On-screen videowindow for background video</description>
            <control type="group">
                <top>0</top>
                <height>flixart_size_h</height>
                <visible>![$EXP[Exp_Video_IsNotPlaying]]</visible>
                <include content="Background_VideoStandard" condition="!Skin.HasSetting(Background.VideoAdaptive)">
                    <right>0</right>
                    <width>flixart_size_w</width>
                </include>
                <include content="Background_VideoDimensions" condition="Skin.HasSetting(Background.VideoAdaptive)">
                    <right>0</right>
                    <width>flixart_size_h</width>
                </include>
                <control type="image">
                    <right>0</right>
                    <width>flixart_size_w</width>
                    <texture colordiffuse="black">diffuse/flixart_invert.png</texture>
                </control>
                <control type="image">
                    <left>0</left>
                    <right>flixart_size_w</right>
                    <texture colordiffuse="black">common/white.png</texture>
                </control>
            </control>
            <control type="image">
                <top>flixart_size_h</top>
                <texture colordiffuse="black">common/white.png</texture>
            </control>
        </control>
    </include>

    <include name="Background_Transition">
        <param name="windowopen_condition">$EXP[Exp_SettingsDialogs_Prev]</param>
        <param name="windowclose_condition">$EXP[Exp_SettingsDialogs_Next]</param>
        <definition>
            <control type="image">
                <texture colordiffuse="$VAR[ColorBackground]">common/white.png</texture>
                <animation effect="fade" start="0" end="100" time="150" tween="sine" easing="out" condition="$PARAM[windowclose_condition]">WindowClose</animation>
                <animation effect="fade" start="100" end="0" time="150" tween="sine" easing="out" condition="$PARAM[windowopen_condition]">WindowOpen</animation>

                <animation effect="fade" start="0" end="100" time="0" tween="sine" easing="out" condition="![$PARAM[windowclose_condition]]">WindowClose</animation>
                <animation effect="fade" start="100" end="0" time="0" tween="sine" easing="out" condition="![$PARAM[windowopen_condition]]">WindowOpen</animation>
            </control>
        </definition>
    </include>

    <include name="Background_Main_Plain">
        <control type="group">
            <description>Plain background used to prevent fadetime transitions</description>
            <include content="Background_Blur">
                <param name="fadetime">0</param>
            </include>
            <include content="Background_Artwork">
                <param name="fadetime">0</param>
            </include>
        </control>
    </include>

    <include name="Background_Main_Standard">
        <control type="group">
            <control type="group">
                <animation effect="fade" start="0" end="100" time="background_fadetime">Visible</animation>
                <animation effect="fade" start="100" end="0" time="background_fadetime">Hidden</animation>
                <include>Background_Blur</include>
                <include>Background_Artwork</include>
            </control>
            <nested />
        </control>
    </include>

    <include name="Background_Main">
        <param name="plain_background">false</param>
        <param name="video_background">!Skin.HasSetting(Background.VideoDisabled)</param>
        <definition>
            <include condition="$PARAM[video_background]">Background_Video</include>
            <include condition="$PARAM[plain_background]">Background_Main_Plain</include>
            <include condition="!$PARAM[plain_background]">Background_Main_Standard</include>
            <include condition="System.HasAddon(resource.images.arctic.waves)">Background_BusyLoader</include>

            <include content="Object_Control" condition="!$EXP[Exp_ColourTheme_IsLight]">
                <param name="control">image</param>
                <texture colordiffuse="$VAR[ColorBackground]">background/combined_flixart.png</texture>
            </include>
            <include content="Object_Control" condition="!$EXP[Exp_ColourTheme_IsLight]">
                <param name="control">image</param>
                <texture colordiffuse="$VAR[ColorBackground]">background/combined_overlay.png</texture>
                <visible>$EXP[Exp_FilterWall_IsMedia] | $EXP[Exp_FilterWall_IsDiscover]</visible>
                <include content="Animation_Fade_In">
                    <param name="type">Visible</param>
                </include>
                <include content="Animation_Fade_Out">
                    <param name="type">Hidden</param>
                </include>
            </include>

            <include content="Object_Control" condition="$EXP[Exp_ColourTheme_IsLight]">
                <param name="control">image</param>
                <texture colordiffuse="$VAR[ColorBackground]">background/combined_fanart.png</texture>
            </include>

        </definition>
    </include>

</includes>
